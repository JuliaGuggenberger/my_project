{{ block content }}
{% load static %}
<!-- ==================================================================== -->
<!-- Survey.html - Post survey page                                       -->
<!-- ==================================================================== -->

<!-- =============================== HEAD =============================== -->
<head>
    <link href="{% static 'common.css' %}" rel="stylesheet">
    <link href="{% static 'commonintro.css' %}" rel="stylesheet">
</head>

<!-- ======================== THANK YOU HTML ======================== -->
<h1 class="title-highlight">Wrap-up questions 1 of 3</h1>

  <p>
    Please take a moment to answer the following questions about your experience during the experiment. Your feedback is important for improving future versions.
  </p>

<!-- Questions -->   
<form method="post">
 <div class="question-block">
    {{ form.understanding_level.label }}
    {{ form.understanding_level }}
    {{ formfield_errors 'understanding_level' }}
  </div><br>
  <div class="question-block">
    {{ form.clarity_of_rules.label }}
    {{ form.clarity_of_rules }}
    {{ formfield_errors 'clarity_of_rules' }}
  </div><br>
  <div class="question-block">
    {{ form.interface_ease.label }}
    {{ form.interface_ease }}
    {{ formfield_errors 'interface_ease' }}
  </div><br>
  <div class="question-block">
    {{ form.familiar_currency.label }}
    <div id="familiar_currency">
      {{ form.familiar_currency }}
    </div>
    {{ formfield_errors 'familiar_currency' }}

    <div id="familiar_currency-other-container" style="display:none;">
      {{ form.familiar_currency_other.label }}
      {{ form.familiar_currency_other }}
      {{ formfield_errors 'familiar_currency_other' }}
    </div>
  </div><br>

  <div class="question-block">
    <label><strong>What did you try to minimize?</strong></label>
    <table class="matrix-table">
      <thead>
        <tr>
          <th></th>
          <th style="color: #C39E17">Phase I</th>
          <th style="color: #731F69">Phase II</th>
          <th style="color: #3B643A">Phase III</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Maximize my budget</td>
          <td>{{ form.strategy_description_phase1.0 }}</td>
          <td>{{ form.strategy_description_phase2.0 }}</td>
          <td>{{ form.strategy_description_phase3.0 }}</td>
        </tr>
        <tr>
          <td>Be environmentally friendly</td>
          <td>{{ form.strategy_description_phase1.1 }}</td>
          <td>{{ form.strategy_description_phase2.1 }}</td>
          <td>{{ form.strategy_description_phase3.1 }}</td>
        </tr>
        <tr>
          <td>Try to replicate my real-world behavior</td>
          <td>{{ form.strategy_description_phase1.2 }}</td>
          <td>{{ form.strategy_description_phase2.2 }}</td>
          <td>{{ form.strategy_description_phase3.2 }}</td>
        </tr>
        <tr>
          <td>I decided according to the travel time</td>
          <td>{{ form.strategy_description_phase1.3 }}</td>
          <td>{{ form.strategy_description_phase2.3 }}</td>
          <td>{{ form.strategy_description_phase3.3 }}</td>
        </tr>
        <tr>
          <td>I decided randomly</td>
          <td>{{ form.strategy_description_phase1.4 }}</td>
          <td>{{ form.strategy_description_phase2.4 }}</td>
          <td>{{ form.strategy_description_phase3.4 }}</td>
        </tr>
        <tr>
          <td>Other</td>
          <td>
            {{ form.strategy_description_phase1.5 }}<br>
            {{ form.strategy_description_phase1_other }}
          </td>
          <td>
            {{ form.strategy_description_phase2.5 }}<br>
            {{ form.strategy_description_phase2_other }}
          </td>
          <td>
            {{ form.strategy_description_phase3.5 }}<br>
            {{ form.strategy_description_phase3_other }}
          </td>
        </tr>
      </tbody>
    </table>
  </div><br>

  <div class="question-block">
    <label><strong>What was your main strategy or approach during each phase?</strong></label>
    <table class="matrix-table">
      <thead>
        <tr>
          <th></th>
          <th> always </th>
          <th> often </th>
          <th> sometimes </th>
          <th> rarely </th>
          <th> never </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>I tried to minimize token use</td>
          <td>{{ form.minimization_focus_1.0 }}</td>
          <td>{{ form.minimization_focus_2.0 }}</td>
          <td>{{ form.minimization_focus_3.0 }}</td>
          <td>{{ form.minimization_focus_4.0 }}</td>
          <td>{{ form.minimization_focus_5.0 }}</td>
        </tr>
        <tr>
          <td>I tried to minimize costs</td>
          <td>{{ form.minimization_focus_1.1 }}</td>
          <td>{{ form.minimization_focus_2.1 }}</td>
          <td>{{ form.minimization_focus_3.1 }}</td>
          <td>{{ form.minimization_focus_4.1 }}</td>
          <td>{{ form.minimization_focus_5.1 }}</td>
        </tr>
        <tr>
          <td>I tried to minimze travel time</td>
          <td>{{ form.minimization_focus_1.2 }}</td>
          <td>{{ form.minimization_focus_2.2 }}</td>
          <td>{{ form.minimization_focus_3.2 }}</td>
          <td>{{ form.minimization_focus_4.2 }}</td>
          <td>{{ form.minimization_focus_5.2 }}</td>
        </tr>
        <tr>
          <td>I tried to minimize car use</td>
          <td>{{ form.minimization_focus_1.3 }}</td>
          <td>{{ form.minimization_focus_2.3 }}</td>
          <td>{{ form.minimization_focus_3.3 }}</td>
          <td>{{ form.minimization_focus_4.3 }}</td>
          <td>{{ form.minimization_focus_5.3 }}</td>
        </tr>
      </tbody>
    </table>
  </div><br>

  <div class="question-block">
    {{ form.fair_price_token.label }}
    {{ form.fair_price_token }}
    {{ formfield_errors 'fair_price_token' }}
  </div><br>

  <button type="submit" class="button">Submit Survey</button>
</form>

<script>
  function toggleOtherField(groupName, otherValue, containerId) {
    const radios = document.querySelectorAll(`input[name="${groupName}"]`);
    const container = document.getElementById(containerId);

    function checkSelection() {
      let selected = Array.from(radios).find(r => r.checked);
      if (selected && selected.value === otherValue) {
        container.style.display = "block";
      } else {
        container.style.display = "none";
      }
    }

    radios.forEach(radio => {
      radio.addEventListener('change', checkSelection);
    });

    checkSelection(); // Initial check on load
  }

  document.addEventListener("DOMContentLoaded", function () {
    toggleOtherField("familiar_currency", "4", "familiar_currency-other-container");
    toggleOtherField("strategy_description_phase1", "6", "strategy_description_phase1_other");
    toggleOtherField("strategy_description_phase2", "6", "strategy_description_phase2_other");
    toggleOtherField("strategy_description_phase3", "6", "strategy_description_phase3_other");
  });
</script>

{{ endblock }}